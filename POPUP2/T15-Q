VehicleController.cs
    public ActionResult GetVehicleById(int id, bool readOnly = false)
    {
       
        var vehicle = id == 0
            ? new VehicleViewModel() // Add mode
            : _dbConnection.QueryFirstOrDefault<VehicleViewModel>(@"
        SELECT  [VehicleListId]
                                          ,[VehSeriesCode]
                                          ,[NumOfVehicles]
                                          ,[ProjDesc]
                                          ,[DateEntered]
                                          ,[EnteredBy]
                                          ,[ModifiedLastBy]
                                          ,[ModifiedLastDate]
                                          ,[Make]
                                          ,[Model]
                                          ,[Year]
                                          ,[Engine]
                                          ,[Transmission]
                                          ,[Differential]
                                          ,[Sopnumber]
                                      FROM [CES].[SBCES].[VehicleList] WHERE VehicleListId = @Id", new { Id = id });

        if (vehicle == null)
            return Content("Vehicle not found");

        ViewBag.ReadOnly = readOnly;
        ViewBag.FormattedDate = vehicle.ModifiedLastDate == default
            ? "System Generated"
            : vehicle.ModifiedLastDate.ToString("MMM dd, yyyy hh:mm:ss tt");

        return PartialView("_VehPopUp", vehicle);
    }

private async Task<VehicleViewModel> GetVehicleJsonByIdAsync(int id)
{
    var model = new List<BCES.Models.Parts.StockCodedPartsViewModel> { };
    return await _dbConnection.QueryFirstOrDefaultAsync<VehicleViewModel>(
   @"
    SELECT 
        VehicleListId,                
        VehSeriesCode,
        NumOfVehicles,
        ProjDesc,
        DateEntered,
        EnteredBy,
        ModifiedLastBy,
        ModifiedLastDate,
        Make,
        Model AS VehModel,
        Year,
        Engine,
        Transmission,
        Differential,
        Sopnumber                
    FROM SBCES.VehicleList
    WHERE VehicleListId = @id", new { id });
  }
