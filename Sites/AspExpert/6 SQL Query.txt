SELECT 
    u.UserId, 
    u.UserName, 
    u.RoleId, 
    r.RoleName,
    STRING_AGG(us.SiteId, ',') AS SiteIds
FROM 
    [User] u
INNER JOIN 
    [Role] r ON u.RoleId = r.RoleId
LEFT JOIN 
    UserSite us ON u.UserId = us.UserId
GROUP BY 
    u.UserId, u.UserName, u.RoleId, r.RoleName
