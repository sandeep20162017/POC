public async Task<IActionResult> GetSites(int? userId)
{
    var allSites = await GetAllSitesAsync(); // Fetch all sites
    if (userId.HasValue)
    {
        var userSites = await GetSitesForUserAsync(userId.Value); // Fetch user-specific sites
        foreach (var site in allSites)
        {
            site.Checked = userSites.Any(us => us.SiteId == site.SiteId);
        }
    }
    return PartialView("SiteCheckBoxGroup", allSites);
}
