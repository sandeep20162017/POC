@model IEnumerable<BCES.Models.Admin.UserViewModel>

@(Html.Kendo().Grid<BCES.Models.Admin.UserViewModel>()
    .Name("userGrid")
    .Columns(columns =>
    {
        columns.Bound(u => u.UserName).Title("User Name").Editable(true);
        columns.Bound(u => u.RoleName).Title("Role").EditorTemplateName("RoleNameDropDown");
        columns.Bound(u => u.Sites).Title("Sites").EditorTemplateName("SiteCheckBoxGroup");
        columns.Command(command => command.Edit()).Title("Actions"); // Add Edit button
    })
    .ToolBar(toolbar => toolbar.Create()) // Toolbar for adding new users
    .Editable(editable => editable.Mode(GridEditMode.Popup)) // Popup editing for better user experience
    .DataSource(dataSource => dataSource
        .Ajax()
        .Model(model =>
        {
            model.Id(u => u.UserId); // Unique identifier
            model.Field(u => u.UserName).Editable(true);
            model.Field(u => u.Sites).Editable(true).DefaultValue(new List<int>());
        })
        .Read("ReadUsers", "UserManagement")
        .Create("CreateUser", "UserManagement")
        .Update("UpdateUser", "UserManagement")
        .Destroy("DeleteUser", "UserManagement")
    )
)
