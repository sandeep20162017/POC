@section scripts {
    <script>
        $(document).ready(function () {
            // Pre-select checkboxes when editing
            $("#userGrid").on("edit", function (e) {
                var dataItem = e.model; // Get the data item being edited
                var checkBoxGroup = e.container.find("[name='Sites']").data("kendoCheckBoxGroup");

                if (checkBoxGroup && dataItem.Sites) {
                    // Map site IDs to pre-select the checkboxes
                    var selectedSiteIds = dataItem.Sites.map(function (site) { return site.SiteId.toString(); });
                    checkBoxGroup.value(selectedSiteIds);
                }
            });
        });
    </script>
}
