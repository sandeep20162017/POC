// â”€â”€ Open vehicle popup and load form partial
window.openEstimatePopup = function (vehicleId) {
    var win = $("#estimatePopup").data("kendoWindow");
    currentVehicleId = vehicleId;

    win.title(vehicleId === 0 ? "Add New Estimate" : "Vehicle Estimate #" + vehicleId);
    win.center().open();

    // Load vehicle tab first
    loadTabContent(
        "vehicleTabContent",
        '@Url.Action("GetVehicleById", "Vehicles")',
        { id: vehicleId },
        function () {
            // ðŸš€ Partial (_VehPopup.cshtml) is now loaded
            initScPopupForm();     // apply Add/Edit rules
            wireVehicleForm();     // rebind save/cancel handlers

            if (vehicleId !== 0) {
                enableAllTabs();
            }
        }
    );
};
