let popupHasChanges = false;
let originalData = {};

function onScPartsEdit(e) {
    // Capture original data
    originalData = e.model.toJSON();

    // Track changes
    e.container.find("input, select, textarea").on("change input", function () {
        popupHasChanges = true;
    });

    // Intercept popup close ("X" button)
    e.container.data("kendoWindow").bind("close", function (ev) {
        if (popupHasChanges && JSON.stringify(originalData) !== JSON.stringify(e.model.toJSON())) {
            if (!confirm("You have unsaved changes. Are you sure you want to discard them?")) {
                ev.preventDefault();
            }
        }
    });
}
