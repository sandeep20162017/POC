function saveScPartPopup() {
    console.warn('Inside saveScPartPopup');
    var grid = $("#" + scInEstimateGridName).data("kendoGrid");
    var form = $("#scPartsForm");

    if (!form.valid()) {
        alert("Please fill all required fields.");
        return;
    }

    // Convert form to JS object
    var formArray = form.serializeArray();
    var formDataObject = {};
    $.each(formArray, function (_, field) {
        formDataObject[field.name] = field.value;
    });

    console.warn('formDataObject:', formDataObject);

    var isEdit = $("#MMSStockCode").val() !== "";

    $.ajax({
        url: isEdit
            ? '@Url.Action("UpdateScPartsUsedInEstimates", "ScPartsUsedInEstimates")?id=' + '@ViewBag.PartNum' + "&gridType=" + '@ViewBag.GridType'
            : '@Url.Action("CreateScPartsUsedInEstimates", "ScPartsUsedInEstimates")?id=' + '@ViewBag.PartNum' + "&gridType=" + '@ViewBag.GridType',
        type: "POST",
        contentType: "application/json; charset=UTF-8", // important for [FromBody]
        data: JSON.stringify(formDataObject), // send JSON string
        success: function () {
            $(".k-window-content.k-content").data("kendoWindow").close();
            grid.dataSource.read();
        },
        error: function (xhr) {
            alert("Save failed: " + xhr.status + " " + xhr.responseText);
        }
    });
}
