var currentColumnName = "";

$(document).ready(function () {
    setTimeout(function () {
        var grid = $("#NscPartsUsedGrid").data("kendoGrid");

        if (grid) {
            console.error('found grid');
            grid.bind("edit", function (e) {
                console.error('inside edit');
                // Capture the column name being edited
                var fieldName = e.container.find("input[data-role='combobox']").attr("name");
                currentColumnName = fieldName || "";
                console.error("Current Column:", currentColumnName);
            });
        } else {
            console.error('Grid not found');
        }
    }, 100);
});

function getComboBoxParams() {
    var combobox = $(".k-combobox").data("kendoComboBox");

    if (combobox) {
        var params = {
            columnName: currentColumnName, // Match the controller parameter name
            searchText: combobox.text() || "" // Match the controller parameter name
        };

        console.log("Sending params:", params);
        return params;
    }

    return {};
}
