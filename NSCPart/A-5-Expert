$(document).ready(function () {
    setTimeout(function () {
        var grid = $("#NscPartsUsedGrid").data("kendoGrid");

        if (grid) {
            console.error('found grid');

            grid.bind("edit", function (e) {
                console.error('inside edit');

                var fieldName = e.container.find("input[data-role='combobox']").attr("name");
                currentColumnName = fieldName || "";
                console.error("Current Column:", currentColumnName);

                // ✅ Get ComboBox instance from the edited cell
                var combobox = e.container.find("input[data-role='combobox']").data("kendoComboBox");

                if (combobox) {
                    console.log("ComboBox initialized in cell:", combobox);

                    // ✅ Block typing but keep dropdown clickable
                    combobox.input.on("keydown", function(e) {
                        e.preventDefault(); // Block typing
                    });

                    // ✅ Optionally open the dropdown when the input is focused
                    combobox.input.on("focus", function() {
                        combobox.open();
                    });
                }
            });
        } else {
            console.error('Grid not found');
        }
    }, 100);
});
