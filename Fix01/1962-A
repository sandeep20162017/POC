if (mode === "Edit") {
    console.warn('Edit mode - making everything readonly except JobNumber');

    if (ddl) {
        var prefix = $("#MbPrefixHidden").val();

        if (!prefix) {
            // Legacy row → show "Legacy Estimate"
            ddl.text("Legacy Estimate");   // <-- override display text
            ddl.value("");                 // <-- keep value empty
        } else {
            // New row → show actual prefix
            ddl.value(prefix);
        }

        ddl.enable(false);
    }

    setPopupReadonly([
        "DateOpened", "Keyword", "Description",
        "BusType", "NumBusComp", "VendorPartNum",
        "BuyCode", "RebuildCode", "CoreCode", "AnnualUsage",
        "BenchNumber", "SampleProvided", "Recommendation",
        "BuyNewCost", "InternalCost", "SopNumber",
        "CoreCost", "JobNumber"
    ]);

    setPopupEditable(["JobNumber"]);
}
