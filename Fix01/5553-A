// âœ… Global variable so it's shared everywhere
var currentVehicleId = 0;
Then, inside your AJAX success handler (after saving), update it like this:

js
Copy code
currentVehicleId = response.VehicleListId;
This ensures all functions â€” even those in reloaded partials â€” can access the same currentVehicleId.

ðŸ”¹ Step 2 â€” Confirm youâ€™re using it consistently
Anywhere you load tab content, ensure you pass that same ID:

js
Copy code
loadTabContent(tab.id, tab.url, { id: currentVehicleId });
And for the vehicle form:

js
Copy code
loadVehicleForm(currentVehicleId);
ðŸ”¹ Step 3 â€” Optional: store it in the DOM for persistence
If you want an even more bulletproof setup (for example, if partials are reloaded and scripts re-executed), store it in a hidden field or data attribute.

Example:

html
Copy code
<input type="hidden" id="VehicleListId" value="0" />
When you save successfully:

js
Copy code
currentVehicleId = response.VehicleListId;
$("#VehicleListId").val(currentVehicleId);
When reloading a tab:

js
Copy code
var id = currentVehicleId || $("#VehicleListId").val();
loadVehicleForm(id);
âœ… This way, even if your popup re-renders the JS, the Vehicle ID is still available in the DOM.

ðŸ”¹ Step 4 â€” Keep the popup title synced (optional polish)
After you update currentVehicleId, itâ€™s good practice to keep the popup title up to date too:

js
Copy code
$("#estimatePopup").data("kendoWindow")
    .title("Vehicle Estimate #" + currentVehicleId);
