function getDropDownParams() {
    var input = $(".k-dropdown input.k-input:focus");
    return {
        columnName: input.attr("name")?.replace("_input", "").split('.').pop(),
        searchText: input.val() || ""
    };
}

@model object

@{
    var fieldName = ViewData.TemplateInfo.GetFullHtmlFieldName("");
}

@(Html.Kendo().DropDownList()
    .Name(fieldName)
    .DataTextField("Text")
    .DataValueField("Value")
    .Filter(FilterType.Contains)        // Enables search
    .OptionLabel("Search...")           // Placeholder text
    .AutoBind(false)                    // Load on first search, not on load
    .MinLength(2)                       // Trigger server call after 2 characters
    .HtmlAttributes(new Dictionary<string, object>
    {
        { "name", fieldName },
        { "data-column", fieldName }
    })
    .DataSource(source =>
    {
        source.Read(read =>
        {
            read.Url(Url.Action("GetAutoCompleteData", "AutoComplete"))
                .Type(HttpVerbs.Get)
                .Data("getComboBoxParams"); // Optional: passes extra params
        })
        .ServerFiltering(true); // Let server do the filtering
    })
)
