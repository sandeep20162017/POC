function getDropDownParams() {
    var dropdown = $(".k-dropdown[data-column]").data("kendoDropDownList");

    if (dropdown) {
        return {
            columnName: dropdown.element.attr("data-column"), // Get column name from data attribute
            searchText: dropdown.input.val() || "" // Get search text directly from the input
        };
    }

    return {};
}

function onDropdownFiltering(e) {
    var dropdown = e.sender;

    // ✅ Extract params directly from the dropdown instance
    var params = {
        columnName: dropdown.element.attr("data-column"),
        searchText: e.filter?.value || "" // Use filter value directly
    };

    console.log("Params sent to controller:", params); // Debugging

    if (params.columnName) {
        dropdown.dataSource.read(params);
    }
}

// ✅ Allow Enter key for input
$(document).on("keydown", ".k-dropdown .k-input", function(e) {
    if (e.keyCode === 13) {
        return true; // Allow Enter key submission
    }
    e.preventDefault(); // Prevent default behavior for other keys
});
