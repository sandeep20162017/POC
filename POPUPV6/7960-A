$("#estimateTabs").kendoTabStrip({
    activate: function (e) {
        var tabId = $(e.contentElement).attr("id");

        switch (tabId) {
            case "partsSummaryTab":
                refreshGridByPrefix("MaterialCostSummaryInRbViewModelGrid_");
                break;

            case "labourSummaryTab":
                refreshGridByPrefix("LabourDetailsRebuiltPartsViewModelGrid_");
                break;

            case "labourDetailsTab":
                refreshGridByPrefix("LabourDetailsGrid_");
                break;

            case "finalEstimateTab":
                refreshGridByPrefix("FinalEstimateGrid_");
                break;
        }
    },
    contentLoad: function (e) {
        // First time this tab loads â†’ refresh grid if present
        var tabId = $(e.contentElement).attr("id");
        console.log("Tab loaded:", tabId);

        $(e.contentElement).find("[id*='Grid']").each(function() {
            var grid = $(this).data("kendoGrid");
            if (grid) {
                console.log("Refreshing freshly loaded grid:", this.id);
                grid.dataSource.read();
            }
        });
    }
});
