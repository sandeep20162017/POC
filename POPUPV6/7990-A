// Initialize TabStrip with refresh logic for summary tabs
$("#estimateTabs").kendoTabStrip({
    activate: function (e) {
        var tabId = $(e.contentElement).attr("id"); // active tab <div> ID

        switch (tabId) {
            case "partsSummaryTab":
                refreshGrid("#partsSummaryGrid");
                break;

            case "labourSummaryTab":
                refreshGrid("#labourSummaryGrid");
                break;

            case "labourDetailsTab":
                refreshGrid("#labourDetailsGrid");
                break;

            case "finalEstimateTab":
                refreshGrid("#finalEstimateGrid");
                break;

            default:
                // No refresh needed for Vehicle or individual parts tabs
                break;
        }
    }
});

// Helper function to safely refresh a grid
function refreshGrid(gridSelector) {
    var grid = $(gridSelector).data("kendoGrid");
    if (grid) {
        grid.dataSource.read();   // fetch fresh data from server
        grid.refresh();           // redraw grid with new data
    } else {
        console.warn("Grid not found:", gridSelector);
    }
}
