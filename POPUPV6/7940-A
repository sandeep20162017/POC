function onScPartsEdit(e) {
    currentScPartsModel = e.model;

    // Wait for the popup editor and widgets to initialize
    setTimeout(function () {
        const $stockCode = $("#MMSStockCode");

        if ($stockCode.length === 0) {
            console.warn("MMSStockCode element not found.");
            return;
        }

        // Poll until the widget is ready
        const waitForWidget = setInterval(function () {
            const widget = getKendoWidget("MMSStockCode");
            if (widget) {
                clearInterval(waitForWidget);

                if (e.model.isNew()) {
                    setPopupEditable(["MMSStockCode"]);
                } else {
                    setPopupReadonly(["MMSStockCode"]);
                }

                $("#MMSPartDescription").focus();
            }
        }, 50);
    }, 100);
}
