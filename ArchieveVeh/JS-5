function onEditRbParts(e) {
    var grid = $("#RbPartsMaterialDetailsRebuiltPartsGrid").data("kendoGrid");

    if (!e.model.isNew()) {
        // Use polling technique, not setTimeout static wait
        var tries = 0;
        var maxTries = 10;

        function tryDisableWidgets() {
            tries++;
            // ----- Try to find RebuiltStockNum -----
            var rebuiltField = e.container.find("[name='RebuiltStockNum']");
            var rebuiltWidget = rebuiltField.data("kendoComboBox") || rebuiltField.data("kendoDropDownList");

            if (rebuiltWidget) {
                rebuiltWidget.enable(false);
                rebuiltWidget.wrapper.addClass("field-disabled");
            } else if (tries < maxTries) {
                setTimeout(tryDisableWidgets, 100); // Retry after 100ms
            } else {
                console.warn("RebuiltStockNum ComboBox widget not found after retries.");
            }

            // ----- Try to find MmsStockCode -----
            var mmsField = e.container.find("[name='MmsStockCode']");
            var mmsWidget = mmsField.data("kendoComboBox") || mmsField.data("kendoDropDownList");

            if (mmsWidget) {
                mmsWidget.enable(false);
                mmsWidget.wrapper.addClass("field-disabled");
            }
        }

        tryDisableWidgets();
    }
}
